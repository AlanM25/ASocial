<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>Register</title>
</head>
<body class="vh-100" style="background: linear-gradient(to right, rgb(0, 0, 0) , rgb(90, 90, 90))">
    <div class="container mt-2">
        <nav class="navbar navbar-expand-lg navbar-dark">
          <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="index.html">ASocial</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>
        </nav>
    </div>  
    <div class="container py-5 h-75">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-12 col-md-8 col-lg-6 col-xl-8">
                <div class="card bg-dark text-white" style="border-radius: 1rem;">
                    <div class="card-body p-5 text-center">
                        <div class="mb-md-5 mt-md-4 pb-5">
                            <h2 class="fw-bold mb-2 text-uppercase">Registro</h2>
                            <p class="text-white-50 mb-5">Por favor completa todos los campos obligatorios (*)</p>

                            <div class="row">
                                <div class="col-md-6 col-12 mb-4">
                                    <div  class="form-outline form-white">
                                        <input type="text" id="nombre" class="form-control form-control-lg bg-dark text-white border-2" required />
                                        <label class="form-label" for="nombre">Nombre *</label>
                                    </div>
                                </div>

                                <div class="col-md-6 col-12 mb-4">
                                    <div class="form-outline form-white">
                                        <input type="text" id="apellidos" class="form-control form-control-lg bg-dark text-white border-2" />
                                        <label class="form-label" for="apellidos">Apellidos</label>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 col-12 mb-4">
                                    <div class="form-outline form-white">
                                        <input type="text" id="username" class="form-control form-control-lg bg-dark text-white border-2" required />
                                        <label class="form-label" for="username">Username *</label>
                                    </div>
                                </div>

                                <div class="col-md-6 col-12 mb-4">
                                    <div class="form-outline form-white">
                                        <input type="email" id="email" class="form-control form-control-lg bg-dark text-white border-2" required />
                                        <label class="form-label" for="email">Correo electrónico *</label>
                                    </div>
                                </div>

                                <div class="col-md-6 col-12 mb-4">
                                    <div class="form-outline form-white">
                                        <input type="password" id="password" class="form-control form-control-lg bg-dark text-white border-2" required />
                                        <label class="form-label" for="password">Contraseña *</label>
                                    </div>
                                </div>

                                <div class="col-md-6 col-12 mb-4">
                                    <div class="form-outline form-white">
                                        <input type="password" id="confirm-password" class="form-control form-control-lg bg-dark text-white border-2" required />
                                        <label class="form-label" for="confirm-password">Confirmar Contraseña *</label>
                                    </div>
                                </div>

                                <div class="col-md-6 col-12 mb-4">
                                    <div class="form-outline form-white">
                                        <select id="genero" class="form-select form-control-lg bg-dark text-white border-2" required>
                                            <option value="" disabled selected>Selecciona tu género *</option>
                                            <option value="Masculino">Masculino</option>
                                            <option value="Femenino">Femenino</option>
                                            <option value="Otro">Otro</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6 col-12 mb-4">
                                    <div class="form-outline form-white">
                                        <input type="date" id="fecha-nacimiento" class="form-control form-control-lg bg-dark text-white border-2" required />
                                        <label class="form-label" for="fecha-nacimiento">Fecha de nacimiento *</label>
                                    </div>
                                </div>
                            </div>

                            <button class="btn btn-outline-light btn-lg px-5" type="submit">Registrarse</button>
                        </div>

                        <div>
                            <p class="mb-0">¿Ya tienes cuenta? <a href="login.html" class="text-white-50 fw-bold">Inicia sesión</a></p>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

    <script>
        $(document).ready(function () {
            $("#genero").change(function () {
                if ($(this).val() === "Otro") {
                    if (!$("#generoOtro").length) {
                        $(this).parent().append('<input type="text" id="generoOtro" class="form-control form-control-lg bg-dark text-white border-2 mt-2" placeholder="Especifica tu género">');
                    }
                } else {
                    $("#generoOtro").remove();
                }
            });
    
            $("button[type='submit']").click(function (e) {
                e.preventDefault();
                let isValid = true;
                let errorMessage = "Faltan los siguientes campos:\n";
                
                $(".form-control").removeClass("border-danger");
    
                let nombre = $("#nombre").val().trim();
                let username = $("#username").val().trim();
                let email = $("#email").val().trim();
                let password = $("#password").val().trim();
                let confirmPassword = $("#confirm-password").val().trim();
                let genero = $("#genero").val();
                let fechaNacimiento = $("#fecha-nacimiento").val();
    
                if (nombre === "") {
                    $("#nombre").addClass("border-danger");
                    errorMessage += "- Nombre\n";
                    isValid = false;
                }
                if (username === "") {
                    $("#username").addClass("border-danger");
                    errorMessage += "- Username\n";
                    isValid = false;
                }
                if (email === "" || !validateEmail(email)) {
                    $("#email").addClass("border-danger");
                    errorMessage += "- Email (Debe ser válido)\n";
                    isValid = false;
                }
                if (password === "") {
                    $("#password").addClass("border-danger");
                    errorMessage += "- Contraseña\n";
                    isValid = false;
                }
                if (confirmPassword === "" || password !== confirmPassword) {
                    $("#confirm-password").addClass("border-danger");
                    errorMessage += "- Confirmar contraseña (Debe coincidir con la contraseña)\n";
                    isValid = false;
                }
                if (genero === null) {
                    $("#genero").addClass("border-danger");
                    errorMessage += "- Género\n";
                    isValid = false;
                }
                if (fechaNacimiento === "" || !validateAge(fechaNacimiento)) {
                    $("#fecha-nacimiento").addClass("border-danger");
                    errorMessage += "- Fecha de nacimiento (Debe ser mayor de 18 años)\n";
                    isValid = false;
                }
    
                if (!isValid) {
                    alert(errorMessage);
                } else {
                    alert("Registro exitoso");
                    window.location.href = "login.html";
                }
            });
    
            function validateEmail(email) {
                let regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return regex.test(email);
            }
    
            function validateAge(fecha) {
                let birthDate = new Date(fecha);
                let today = new Date();
                let age = today.getFullYear() - birthDate.getFullYear();
                let monthDiff = today.getMonth() - birthDate.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                return age >= 18;
            }
        });
    </script>
</body>
</html>